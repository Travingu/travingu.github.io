---
import SkillBoxes from './SkillBoxes.astro'
---

<div class="skills-grid">
    <SkillBoxes title="Front End Languages" skills={["HTML", "CSS", "JavaScript"]}/>
    <SkillBoxes title="Back End Languages" skills={["Java", "Python", "Luau"]}/>
    <SkillBoxes title="Developer Tools" skills={["Git", "VS Code", "Firebase"]}/>
    <SkillBoxes title="Frameworks & Libraries" skills={["OpenCV", "MediaPipe"]}/>
    <SkillBoxes title="CAD Design" skills={["KiCad", "AutoFusion", "SolidWorks"]}/>
</div>

<dialog id="skill-dialog">
    <div class="dialog-content">
        <h3 id="dialog-title"></h3>
        <div id="dialog-skills"></div>
        <button id="close-dialog">Close</button>
    </div>
</dialog>

<style>
    .skills-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        align-items: start;
    }

    @media (max-width: 768px) {
        .skills-grid {
            grid-template-columns: 1fr;
        }
    }

    dialog {
        border: none;
        border-radius: 15px;
        padding: 0;
        background-color: #f2fdff;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        max-width: 90vw;
        width: 400px;
    }

    dialog[open] {
        animation: fadeIn 0.3s ease-out;
    }

    dialog::backdrop {
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(2px);
    }

    dialog[open]::backdrop {
        animation: backdropFade 0.3s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes backdropFade {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .dialog-content {
        padding: 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
    }

    #dialog-title {
        margin: 0;
        font-size: 1.5rem;
        color: #564787;
    }

    #dialog-skills {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
    }

    #close-dialog {
        background-color: #564787;
        color: #f2fdff;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.2s;
    }

    #close-dialog:hover {
        background-color: #a89dce;
    }
</style>

<script>
    const dialog = document.getElementById('skill-dialog') as HTMLDialogElement;
    const titleEl = document.getElementById('dialog-title');
    const skillsEl = document.getElementById('dialog-skills');
    const closeBtn = document.getElementById('close-dialog');

    document.querySelectorAll('.skill-trigger').forEach(trigger => {
        trigger.addEventListener('click', () => {
            const title = trigger.querySelector('.titleBoxes')?.textContent;
            const content = trigger.querySelector('.hidden-content')?.innerHTML;

            if (titleEl && title) titleEl.textContent = title;
            if (skillsEl && content) skillsEl.innerHTML = content;
            
            dialog?.showModal();
        });
    });

    closeBtn?.addEventListener('click', () => {
        dialog?.close();
    });

    dialog?.addEventListener('click', (e) => {
        const rect = dialog.getBoundingClientRect();
        if (e.clientX < rect.left || e.clientX > rect.right || 
            e.clientY < rect.top || e.clientY > rect.bottom) {
            dialog.close();
        }
    });
</script>
